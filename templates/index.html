<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Agende seus serviços em Piripiri com facilidade. Encontre e agende profissionais confiáveis em sua cidade.">
  <meta name="keywords" content="agendamento, serviços, Piripiri, salão de beleza, oficina, clínica">
  <title>Piripiri - Agende seus serviços</title>
  
  <!-- Favicon -->
  <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='assets/favicon.ico')}}">
  
  <!-- CSS -->
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/perfil.css') }}">
  
  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  
  <!-- Icons -->
  <script src="https://kit.fontawesome.com/01bfd408f3.js" crossorigin="anonymous"></script>
</head>
<body>
  <!-- Overlay para fechar sidebar -->
  <div class="overlay" id="overlay" onclick="fecharMenu()"></div>

  <!-- Sidebar de navegação -->
  <aside class="sidebar" id="sidebar">
    <div class="sidebar-top">
      <h2>Piripiri</h2>
      <button class="close-btn" onclick="fecharMenu()" aria-label="Fechar menu">
        <i class="fas fa-times"></i>
      </button>
    </div>
    
    <nav class="sidebar-links">
      <ul>
        <li><a href="{{url_for('index')}}"><i class="fas fa-home"></i> Início</a></li>
        <li><a href="{{ url_for('empresas_por_categoria', categoria='Salão de Beleza') }}"><i class="fas fa-cut"></i> Salão de Beleza</a></li>
        <li><a href="{{ url_for('empresas_por_categoria', categoria='Oficina Mecânica') }}"><i class="fas fa-car"></i> Oficina Mecânica</a></li>
        <li><a href="{{ url_for('empresas_por_categoria', categoria='Clínica Médica') }}"><i class="fas fa-stethoscope"></i> Clínica</a></li>
        <li><a href="{{ url_for('empresas_por_categoria', categoria='Prestador de Serviço') }}"><i class="fas fa-user-cog"></i> Prestador de Serviço</a></li>
        <li><a href="{{ url_for('empresas_por_categoria', categoria='Restaurante') }}"><i class="fas fa-utensils"></i> Restaurantes</a></li>
        <li><a href="{{ url_for('empresas_por_categoria', categoria='Academia') }}"><i class="fas fa-dumbbell"></i> Academias</a></li>
        <li><a href="{{ url_for('empresas_por_categoria', categoria='Pet Shop') }}"><i class="fas fa-paw"></i> Pet Shops</a></li>
        <hr>
        <li><a href="#"><i class="fas fa-info-circle"></i> Sobre Nós</a></li>
        <li><a href="#"><i class="fas fa-question-circle"></i> Ajuda & Suporte</a></li>
      </ul>
    </nav>
    
    {% if user %}
      <div class="sidebar-bottom">
        <a href="{{ url_for('auth.logout') }}" class="btn-sidebar" >
          <i class="fas fa-sign-in-alt"></i> Sair
        </a>
      </div>
    {% else %}
      <div class="sidebar-bottom">
        <a href="{{ url_for('auth.login') }}" class="btn-sidebar" >
          <i class="fas fa-sign-in-alt"></i> Entrar / Cadastrar
        </a>
      </div>
    {% endif %}
  </aside>

  <!-- Cabeçalho principal -->
  <header class="hero">
    <!-- Barra de navegação -->
    <nav class="navbar">
      <div class="nav-left">
        <button onclick="abrirMenu()" aria-label="Abrir menu">
          <i class="fas fa-bars"></i>
        </button>
      </div>
      
      <span class="logo">Piripiri</span>
      
      <div class="nav-right">
        <!-- link antigo {{url_for('auth.login')}}-->
        {% if user %}
          <a href="#" aria-label="Perfil do usuário">
            <i class="fas fa-user"></i>
          </a>
        {% else %}
          <a href="{{url_for('auth.login')}}">
            <i class="fas fa-user"></i>
          </a>
        {% endif %}
      </div>
    </nav>
    
    <!-- Conteúdo do hero -->
    <div class="hero-content container">
      <div class="hero-text">
        <h1>Agende seus serviços<br>em Piripiri com<br><strong>facilidade</strong></h1>
        <p>Encontre e agende profissionais confiáveis em sua cidade</p>
        <a href="#" class="btn-green">Começar Agora</a>
      </div>
      
      <div class="hero-image">
        <img src="{{ url_for('static', filename='assets/hero-img.png')}}" alt="Ilustração representando agendamento de serviços em Piripiri">
      </div>
    </div>
  </header>

  <!-- Seção de categorias -->
  <section class="categorias">
    <div class="container">
      <h2>Categorias de Serviços</h2>
      
      <div class="categorias-wrapper">
        <button class="seta" aria-label="Categorias anteriores">
          <i class="fas fa-chevron-left"></i>
        </button>
        
        <div class="categorias-grid">
          <a class="categoria" href="{{ url_for('empresas_por_categoria', categoria='Salão de Beleza') }}">
            <i class="fas fa-cut"></i>
            <span>Salão de Beleza</span>
          </a>
          <a class="categoria" href="{{ url_for('empresas_por_categoria', categoria='Oficina Mecânica') }}">
            <i class="fas fa-car"></i>
            <span>Oficina Mecânica</span>
          </a>
          <a class="categoria" href="{{ url_for('empresas_por_categoria', categoria='Clínica') }}">
            <i class="fas fa-stethoscope"></i>
            <span>Clínica</span>
          </a>
          <a class="categoria" href="{{ url_for('empresas_por_categoria', categoria='Prestador de Serviço') }}">
            <i class="fas fa-user-cog"></i>
            <span>Prestador de Serviço</span>
          </a>
          <a class="categoria" href="{{ url_for('empresas_por_categoria', categoria='Restaurante') }}">
            <i class="fas fa-utensils"></i>
            <span>Restaurantes</span>
          </a>
          <a class="categoria" href="{{ url_for('empresas_por_categoria', categoria='Academia') }}">
            <i class="fas fa-dumbbell"></i>
            <span>Academias</span>
          </a>
          <a class="categoria" href="{{ url_for('empresas_por_categoria', categoria='Pet Shop') }}">
            <i class="fas fa-paw fa-2x"></i>
            <span>Pet Shop</span>
          </a>
        </div>
        
        <button class="seta" aria-label="Próximas categorias">
          <i class="fas fa-chevron-right"></i>
        </button>
      </div>
    </div>
  </section>

  <!-- Seção de empresas em destaque -->
  <section class="empresas">
    <div class="container">
      <h2>Empresas em Destaque</h2>
      <div class="empresas-grid">
        {% if empresas %} 
          {% for empresa in empresas %}
            <article class="empresa-card">
              <img src="{{ empresa.banner_imagem }}" alt="Imagem da {{ empresa.nome }}" class="empresa-imagem" ></img>
              <h3 class="empresa-nome">{{ empresa.nome_fantasia }}</h3>
              <div class="info-row">
                <i class="fas fa-map-marker-alt"></i>
                <span>{{ empresa.endereco }}</span>
              </div>
              <p class="tags">{{ empresa.categoria }}</p>
              <a href="{{ url_for('selecionar_empresa', id_empresa=empresa.id) }}" class="btn-green">Agendar Agora</a>
            </article>
          {% endfor %}
        {% else %}
          <!-- Conteúdo estático padrão -->
            <article class="empresa-card">
            <div class="empresa-imagem" aria-label="Imagem da Cabeleireira Exemplo"></div>
            <h3 class="empresa-nome">Cabeleireira Exemplo</h3>
            <div class="info-row">
              <i class="fas fa-map-marker-alt"></i>
              <span>Av. Exemplo, 124</span>
            </div>
            <p class="tags">Corte · Coloração · Penteado</p>
            <a href="{{ login }}" class="btn-green">Agendar Agora</a>
          </article>

          <article class="empresa-card">
            <div class="empresa-imagem" aria-label="Imagem do Auto Center Piripiri"></div>
            <h3 class="empresa-nome">Auto Center Piripiri</h3>
            <div class="info-row">
              <i class="fas fa-map-marker-alt"></i>
              <span>Rua das Oficinas, 200</span>
            </div>
            <p class="tags">Mecânica · Pneus · Troca de Óleo</p>
            <a href="{{ login }}" class="btn-green">Agendar Agora</a>
          </article>
          
          <article class="empresa-card">
            <div class="empresa-imagem" aria-label="Imagem da Clínica Saúde Total"></div>
            <h3 class="empresa-nome">Clínica Saúde Total</h3>
            <div class="info-row">
              <i class="fas fa-map-marker-alt"></i>
              <span>Av. Central, 321</span>
            </div>
            <p class="tags">Clínica Geral · Pediatria · Exames</p>
            <a href="{{ login }}" class="btn-green">Agendar Agora</a>
          </article>
          
          <article class="empresa-card">
            <div class="empresa-imagem" aria-label="Imagem da Tech Support Services"></div>
            <h3 class="empresa-nome">Tech Support Services</h3>
            <div class="info-row">
              <i class="fas fa-map-marker-alt"></i>
              <span>Rua da Tecnologia, 45</span>
            </div>
            <p class="tags">TI · Suporte · Redes</p>
            <a href="{{ login }}" class="btn-green">Agendar Agora</a>
          </article>
          
          <article class="empresa-card">
            <div class="empresa-imagem" aria-label="Imagem da Bella Estética"></div>
            <h3 class="empresa-nome">Bella Estética</h3>
            <div class="info-row">
              <i class="fas fa-map-marker-alt"></i>
              <span>Rua das Flores, 88</span>
            </div>
            <p class="tags">Estética · Massagem · Spa</p>
            <a href="{{ login }}" class="btn-green">Agendar Agora</a>
          </article>
          
          <article class="empresa-card">
            <div class="empresa-imagem" aria-label="Imagem da Mecânica Rápida"></div>
            <h3 class="empresa-nome">Mecânica Rápida</h3>
            <div class="info-row">
              <i class="fas fa-map-marker-alt"></i>
              <span>Av. dos Mecânicos, 55</span>
            </div>
            <p class="tags">Reparos · Manutenção · Elétrica</p>
            <a href="{{ login }}" class="btn-green">Agendar Agora</a>
          </article>
          
          <article class="empresa-card">
            <div class="empresa-imagem" aria-label="Imagem do Consultório Dr. Silva"></div>
            <h3 class="empresa-nome">Consultório Dr. Silva</h3>
            <div class="info-row">
              <i class="fas fa-map-marker-alt"></i>
              <span>Rua da Saúde, 12</span>
            </div>
            <p class="tags">Medicina · Família · Consultas</p>
            <a href="{{ login }}" class="btn-green">Agendar Agora</a>
          </article>
          
          <article class="empresa-card">
            <div class="empresa-imagem" aria-label="Imagem da Home Cleaning Pro"></div>
            <h3 class="empresa-nome">Home Cleaning Pro</h3>
            <div class="info-row">
              <i class="fas fa-map-marker-alt"></i>
              <span>Rua Limpeza, 99</span>
            </div>
            <p class="tags">Limpeza · Residencial · Escritórios</p>
            <a href="{{ login }}" class="btn-green">Agendar Agora</a>
          </article>
        {% endif %}
      </div>


      
      <div class="empresas-grid">

      </div>
      
      <div class="center-btn">
        <a href="#" class="btn-green">Ver Todas as Empresas</a>
      </div>
    </div>
  </section>

  <!-- Seção como funciona -->
  <section class="como-funciona">
    <div class="container">
      <h2>Como Funciona</h2>
      
      <div class="etapas">
        <div class="etapa">
          <div class="numero">1</div>
          <h3>Escolha um Serviço</h3>
          <p>Navegue pelas categorias e encontre o serviço que você precisa.</p>
        </div>
        
        <div class="etapa">
          <div class="numero">2</div>
          <h3>Selecione um Profissional</h3>
          <p>Compare avaliações, comentários e disponibilidade de profissionais confiáveis.</p>
        </div>
        
        <div class="etapa">
          <div class="numero">3</div>
          <h3>Agende e Aproveite</h3>
          <p>Marque seu horário e aproveite um serviço de qualidade.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Rodapé -->
  <footer class="footer">
    <div class="container footer-grid">
      <div>
        <h4>Piripiri</h4>
        <p>Agende seus serviços em Piripiri com facilidade. Encontre e agende profissionais confiáveis em sua cidade.</p>
      </div>
      
      <div>
        <h4>Serviços</h4>
        <ul>
          <li>Salão de Beleza</li>
          <li>Oficina Mecânica</li>
          <li>Clínica</li>
          <li>Prestador de Serviço</li>
        </ul>
      </div>
      
      <div>
        <h4>Contato</h4>
        <p>support@piripiri.com</p>
        <p>+55 (86) 9999-9999</p>
        <p>Piripiri, PI - Brasil</p>
      </div>
    </div>
    
    <div class="copy">
      © 2025 Piripiri. Todos os direitos reservados.
    </div>
  </footer>

  <!-- Scripts -->
  <script src="{{url_for('static', filename='js/index.js')}}"></script>
  <script src="{{url_for('static', filename='js/extra.js')}}"></script>

<!-- Modal de Perfil do Usuário -->
<div id="user-modal-container" class="user-modal-container" style="display:none;">
  <div class="user-modal-content">
    <button class="user-modal-close" onclick="fecharUserModal()" aria-label="Fechar modal">&times;</button>
    <h2 class="user-modal-title">Perfil do Usuário</h2>
    <p class="user-modal-subtitle">Informações da sua conta</p>
    <div class="user-modal-avatar" id="userAvatar"></div>
    <h3 class="user-modal-nome">{{ user.nome }}</h3>
    <p class="user-modal-email">{{ user.email }}</p>
    <p class="user-modal-bio">{{ user.bio }}</p>
    <div class="user-modal-empresas">
      <i class="fas fa-building"></i> empresas
    </div>
    <a href="{{ url_for('minhas_empresas') }}" class="btn-green">
      <i class="fas fa-building"></i> Ver Minhas Empresas
    </a>
    <a href="{{ url_for('editar_perfil') }}" class="btn-outline">Editar Perfil</a>
    <a href="{{ url_for('auth.logout') }}" class="user-modal-sair">logout</a>
  </div>
</div>
</body>


<script>

document.addEventListener('DOMContentLoaded', () => {
  const grid = document.querySelector('.categorias-grid');
  const btnPrev = document.querySelectorAll('.seta')[0];
  const btnNext = document.querySelectorAll('.seta')[1];

  btnPrev.addEventListener('click', () => {
    grid.scrollBy({ left: -200, behavior: 'smooth' }); // rola para a esquerda
  });

  btnNext.addEventListener('click', () => {
    grid.scrollBy({ left: 200, behavior: 'smooth' }); // rola para a direita
  });
});


// Cria o objeto user só se estiver definido no backend
{% if user %}
  const user = {
    nome: "{{ user['nome']|e }}",
    foto_perfil: "{{ user.get('foto_perfil', '')|e }}"
  };
{% else %}
  const user = null;
{% endif %}

if (user !== null) {
  const avatarEl = document.getElementById("userAvatar");

  if (user.foto_perfil && user.foto_perfil !== "None" && user.foto_perfil !== "NULL" && user.foto_perfil !== "") {
    avatarEl.innerHTML = `<img src="${user.foto_perfil}" alt="Foto de perfil" style="width: 100%; height: 100%; border-radius: 50%; object-fit: cover;">`;
  } else {
    const nomes = user.nome.trim().split(" ");
    const iniciais = nomes[0][0].toUpperCase() + (nomes[1] ? nomes[1][0].toUpperCase() : "");

    avatarEl.textContent = iniciais;
    avatarEl.style.backgroundColor = "#2C3E50";
    avatarEl.style.color = "#FFF";
    avatarEl.style.fontWeight = "bold";
    avatarEl.style.fontSize = "1.5rem";
    avatarEl.style.textAlign = "center";
    avatarEl.style.display = "flex";
    avatarEl.style.alignItems = "center";
    avatarEl.style.justifyContent = "center";
    avatarEl.style.borderRadius = "50%";
    avatarEl.style.width = "64px";
    avatarEl.style.height = "64px";
  }
}
</script>
</html>